<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"

      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:insert="partials/head :: head('BotaniBuddy Plant Details')"></head>
<body>

<header th:replace="partials/navbar :: navbar"></header>

<div id="loader" class="loading"> </div>

<div th:if="${plant}" class="ui container">

    <a href="/search" class="ui button">Back</a>



    <h1>Plant Details</h1>
    <div class="ui segment">
        <h3 th:text="${plant.common_name}"></h3>
<!--    API PLANT INFO-->
        <div class="ui two column grid">
            <div class="column">
                <img class="ui fluid rounded image" th:src="${plant.image_url}" alt="Plant Photo">
            </div>
            <div class="column">
                <p><strong>Family:</strong> <span th:text="${plant.family}"></span></p>
                <p><strong>Genus:</strong> <span th:text="${plant.genus}"></span></p>
                <p><strong>Scientific Name:</strong> <span th:text="${plant.scientific_name}"></span></p>
                <p><strong>Growth Habit:</strong> <span th:text="${plant.growth_habit}"></span></p>
                <p><strong>Edible:</strong> <span th:text="${plant.edible}"></span></p>
                <p th:if="${plant.minimum_temperature}"><strong>Minimum Temperature:</strong>  <span
                        th:text="${plant.minimum_temperature}"></span></p>
                <p th:if="${plant.maximum_temperature}"><strong>Maximum Temperature:</strong>  <span
                        th:text="${plant.maximum_temperature}"></span></p>
                <p th:if="${plant.ph_minimum}"><strong>Minimum PH:</strong>  <span th:text="${plant.ph_minimum}"></span></p>
                <p th:if="${plant.ph_maximum}"><strong>Maximum PH:</strong>  <span th:text="${plant.ph_maximum}"></span></p>
                <p th:if="${plant.description}"><strong>Description</strong>  <span th:text="${plant.description}"></span></p>
                <p th:if="${plant.sun_requirements}"><strong>Sun_requirements</strong>  <span
                        th:text="${plant.sun_requirements}"></span></p>
                <p th:if="${plant.sowing_method}"><strong>Sowing_method</strong>  <span
                        th:text="${plant.sowing_method}"></span></p>
                <p th:if="${plant.spread}"><strong>Spread</strong>  <span th:text="${plant.spread}"></span></p>
                <p th:if="${plant.row_spacing}"><strong>Row_spacing</strong>  <span th:text="${plant.row_spacing}"></span></p>
            </div>
        </div>
<!--    SAVED USER PLANT INFO-->
        <div>
            <div class="row">
                <form method="post" th:if="${userGardenPlant}" th:action="@{/plants/plantEdit/{id}(id=${userGardenPlant.id})}">
                    <input type="text" th:placeholder="${userGardenPlant.plant.name}" name="name">
                    <label for="sun_amount">Sun Amount</label>
                    <select name="sun_amount" id="sun_amount">
                        <option value="FULL_SUN">Full Sun</option>
                        <option value="PARTIAL_SUN">Partial Sun</option>
                        <option value="FULL_SHADE">Shaded</option>
                    </select>

                    <label for="water_interval">Water Interval</label>
                    <input type="number" id="water_interval" th:placeholder="${userGardenPlant.water_interval}"
                           name="water_interval" min="1" max="30">
                    <label>Is this plant Outside</label>
                    <label for="yes">Yes
                        <input name="is_outside" id="yes" type="radio" value="true">
                    </label>
                    <label for="no">No
                        <input name="is_outside" id="no" type="radio" value="false">
                    </label>

<!--                    QUICK ACTION WATERED TODAY-->
                    <div class="row">
                        <a th:href="@{/plants/quickWater/{id}(id=${plant.id})}">Watered</a>
                    </div>

                    <button class="ui button">Save</button>
                </form>
            </div>
        </div>
<!--    USER PLANT LOGS AND ADD-->
<!--        SHOW SAVED PLANT LOGS-->
        <div class="column">
            <div class="row">
                <div id="comments-container" class="container" th:if="${userGardenPlant.plantLogs.size()>0}">
                <div id="comments-feed" class="column justify-top gap-15">
                    <div th:each="plantLog: ${usersPlantLogs}">
                        <div>
                            <p style="color: white;">[[${plantLog.title}]]
                                <span style="color: gray;" th:text="${plantLog.created_at}"></span>
                            </p>

                            <p style="color: white;" th:text="${plantLog.content}"></p>
                            <div class="row">
                                <a th:href="@{/plants/comment/delete/{plant}.{id}(id=${plantLog.id}, plant=${userGardenPlant.id})}">Delete</a>
<!--                                <a th:href="@{/plants/comment/edit/{plant}.{id}(id=${plantLog.id}, plant=${userGardenPlant.id})}">Edit</a>-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>
        <div class="row">
            <form method="post" th:if="${userGardenPlant}"
                  th:action="@{/plants/comment/{id}(id=${userGardenPlant.id})}" >
            <label for="title">Title:</label>
            <input type="text" name="title" id="title"/>

            <label for="content">Body:</label>
            <textarea name="content" id="content" rows="10" cols="35"></textarea>

            <button class="ui button">Save</button>
        </form>
        </div>
    </div>
</div>
<script>

    window.addEventListener('load',()=>{
        const loader = document.querySelector('.loading');
        loader.classList.add('loading-hidden');
        loader.addEventListener('transitioned', ()=>{
            document.body.removeChild("loading");
        });
    });
</script>

</body>
</html>